# –ú–µ–¥–∏–∞ —Å–ª–æ–π –¥–ª—è —Å–æ—Ñ—Ç—Ñ–æ–Ω–∞

–ú–µ–¥–∏–∞ —Å–ª–æ–π –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π API –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∞—É–¥–∏–æ –¥–∞–Ω–Ω—ã–º–∏ –≤ —Å–æ—Ñ—Ç—Ñ–æ–Ω–µ, –≤–∫–ª—é—á–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫—É –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö RTP —Å–µ—Å—Å–∏–π, jitter buffer, DTMF –∏ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ä–µ–∂–∏–º–æ–≤ —Ä–∞–±–æ—Ç—ã.

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### ‚úÖ –ú–µ–¥–∏–∞ —Å–µ—Å—Å–∏–∏
- **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ RTP —Å–µ—Å—Å–∏–∏**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö RTP –ø–æ—Ç–æ–∫–æ–≤
- **–†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã**: sendrecv, sendonly, recvonly, inactive
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º**: idle, active, paused, closed
- **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏**: –ø–∞–∫–µ—Ç—ã, –±–∞–π—Ç—ã, –ø–æ—Ç–µ—Ä–∏, –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å

### ‚úÖ Jitter Buffer
- **–ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏—è –¥–∂–∏—Ç—Ç–µ—Ä–∞**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è –∫ —Å–µ—Ç–µ–≤—ã–º —É—Å–ª–æ–≤–∏—è–º  
- **–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π —Ä–∞–∑–º–µ—Ä –±—É—Ñ–µ—Ä–∞**: –û—Ç 5 –¥–æ 50 –ø–∞–∫–µ—Ç–æ–≤
- **–ö–æ–Ω—Ç—Ä–æ–ª—å –∑–∞–¥–µ—Ä–∂–∫–∏**: –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞
- **–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–∫–ª—é—á–µ–Ω–∏—è**: –î–ª—è –Ω–∏–∑–∫–æ–ª–∞—Ç–µ–Ω—Ç–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π

### ‚úÖ DTMF –ø–æ–¥–¥–µ—Ä–∂–∫–∞ (RFC 4733)
- **–û—Ç–ø—Ä–∞–≤–∫–∞ DTMF —Å–æ–±—ã—Ç–∏–π**: –¶–∏—Ñ—Ä—ã 0-9, *, #, A-D
- **–ü—Ä–∏–µ–º DTMF —Å–æ–±—ã—Ç–∏–π**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ
- **–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–∞—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –û—Ç 50ms –¥–æ 2 —Å–µ–∫—É–Ω–¥
- **–ü–∞—Ä—Å–∏–Ω–≥ DTMF —Å—Ç—Ä–æ–∫**: –£–¥–æ–±–Ω–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏ –≤ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### ‚úÖ –ê—É–¥–∏–æ –æ–±—Ä–∞–±–æ—Ç–∫–∞
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–æ–¥–µ–∫–æ–≤**: G.711 (Œº-law/A-law), G.722, GSM, G.728, G.729
- **Packet Time**: –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–æ–µ –≤—Ä–µ–º—è –ø–∞–∫–µ—Ç–∏–∑–∞—Ü–∏–∏ (10-40ms)
- **AGC**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–≥—É–ª–∏—Ä–æ–≤–∫–∞ —É—Å–∏–ª–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- **–®—É–º–æ–ø–æ–¥–∞–≤–ª–µ–Ω–∏–µ**: –ë–∞–∑–æ–≤—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
- **–≠—Ö–æ–ø–æ–¥–∞–≤–ª–µ–Ω–∏–µ**: –ó–∞–≥–ª—É—à–∫–∞ –¥–ª—è –±—É–¥—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### ‚úÖ RTCP –ø–æ–¥–¥–µ—Ä–∂–∫–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è)
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ—Ç—á–µ—Ç—ã**: Sender Reports (SR) –∏ Receiver Reports (RR) —Å–æ–≥–ª–∞—Å–Ω–æ RFC 3550
- **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞**: –ü–æ—Ç–µ—Ä–∏ –ø–∞–∫–µ—Ç–æ–≤, jitter, –∑–∞–¥–µ—Ä–∂–∫–∏
- **–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª**: –û—Ç 1 –¥–æ 60 —Å–µ–∫—É–Ω–¥ –º–µ–∂–¥—É –æ—Ç—á–µ—Ç–∞–º–∏
- **–û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π**: Callback –¥–ª—è –≤—Ö–æ–¥—è—â–∏—Ö RTCP –æ—Ç—á–µ—Ç–æ–≤
- **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**: –í–∫–ª—é—á–µ–Ω–∏–µ/–æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –≤–æ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã
- **–ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Å–æ –≤—Å–µ—Ö RTP —Å–µ—Å—Å–∏–π
- **–î–µ—Ç–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞**: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–∞–∂–¥–æ–π RTP —Å–µ—Å—Å–∏–∏ –æ—Ç–¥–µ–ª—å–Ω–æ

### üÜï –£–ª—É—á—à–µ–Ω–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã (v2.0)
- **SessionRTP –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º RTP –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º
- **–ü—É–±–ª–∏—á–Ω—ã–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã**: GetPayloadTypeName(), GetExpectedPayloadSize()
- **–ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã**: –ü—Ä–µ–¥–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è —Ä–∞–∑–º–µ—Ä–æ–≤ –ø–∞–∫–µ—Ç–æ–≤ –∏ DTMF
- **–¢–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ RTCP**: –õ—É—á—à–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ RTCP —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- **–£–ª—É—á—à–µ–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö –º–µ—Ç–æ–¥–æ–≤

## üìã –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### MediaSession
–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–µ–¥–∏–∞ –ø–æ—Ç–æ–∫–∞–º–∏:

```go
config := media.DefaultMediaSessionConfig()
config.SessionID = "call-001"
// Direction —Ç–µ–ø–µ—Ä—å —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ RTP —Å–µ—Å—Å–∏–∏
config.Ptime = time.Millisecond * 20

session, err := media.NewMediaSession(config)
if err != nil {
    return err
}
defer session.Stop()

// –ó–∞–ø—É—Å–∫ —Å–µ—Å—Å–∏–∏
if err := session.Start(); err != nil {
    return err
}

// –û—Ç–ø—Ä–∞–≤–∫–∞ –∞—É–¥–∏–æ —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π
audioData := make([]byte, 160) // 20ms –¥–ª—è 8kHz
err = session.SendAudio(audioData)

// –û—Ç–ø—Ä–∞–≤–∫–∞ —É–∂–µ –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
encodedData := make([]byte, 160) // G.711 –¥–∞–Ω–Ω—ã–µ
err = session.SendAudioRaw(encodedData)

// –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ
err = session.SendAudioWithFormat(audioData, media.PayloadTypePCMA, false)

// –ü—Ä—è–º–∞—è –∑–∞–ø–∏—Å—å –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–æ–∫ (—Å–∞–º—ã–π –±—ã—Å—Ç—Ä—ã–π)
err = session.WriteAudioDirect(encodedData)

// –û—Ç–ø—Ä–∞–≤–∫–∞ DTMF
err = session.SendDTMF(media.DTMF1, time.Millisecond*100)
```

### JitterBuffer
–ö–æ–º–ø–µ–Ω—Å–∞—Ü–∏—è —Å–µ—Ç–µ–≤–æ–≥–æ –¥–∂–∏—Ç—Ç–µ—Ä–∞:

```go
// –í–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ jitter buffer
session.EnableJitterBuffer(true)

// –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
config.JitterEnabled = true
config.JitterBufferSize = 15        // 15 –ø–∞–∫–µ—Ç–æ–≤
config.JitterDelay = time.Millisecond * 80  // 80ms –Ω–∞—á–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞
```

### DTMF
–†–∞–±–æ—Ç–∞ —Å DTMF —Å–∏–≥–Ω–∞–ª–∞–º–∏:

```go
// –û—Ç–ø—Ä–∞–≤–∫–∞ –æ–¥–∏–Ω–æ—á–Ω–æ–≥–æ DTMF
err := session.SendDTMF(media.DTMF5, time.Millisecond*150)

// –ü–∞—Ä—Å–∏–Ω–≥ DTMF —Å—Ç—Ä–æ–∫–∏
digits, err := media.ParseDTMFString("123*456#")
for _, digit := range digits {
    session.SendDTMF(digit, time.Millisecond*100)
    time.Sleep(time.Millisecond*150)
}

// –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Ö–æ–¥—è—â–∏—Ö DTMF
config.OnDTMFReceived = func(event media.DTMFEvent) {
    fmt.Printf("DTMF: %s, –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: %v\n", 
        event.Digit, event.Duration)
}
```

### RTCP
–†–∞–±–æ—Ç–∞ —Å RTCP –æ—Ç—á–µ—Ç–∞–º–∏ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π:

```go
// –í–∫–ª—é—á–µ–Ω–∏–µ RTCP –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
config := media.DefaultMediaSessionConfig()
config.RTCPEnabled = true
config.RTCPInterval = time.Second * 5  // –û—Ç—á–µ—Ç—ã –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ RTCP –æ—Ç—á–µ—Ç–æ–≤
config.OnRTCPReport = func(report media.RTCPReport) {
    fmt.Printf("RTCP –æ—Ç—á–µ—Ç: Type=%d, SSRC=%d\n", 
        report.GetType(), report.GetSSRC())
    
    switch report.GetType() {
    case 200: // Sender Report
        fmt.Println("–ü–æ–ª—É—á–µ–Ω Sender Report")
    case 201: // Receiver Report
        fmt.Println("–ü–æ–ª—É—á–µ–Ω Receiver Report")
    }
}

session, err := media.NewMediaSession(config)

// –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ RTCP –≤–æ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã
session.EnableRTCP(true)  // –í–∫–ª—é—á–∏—Ç—å RTCP
session.EnableRTCP(false) // –û—Ç–∫–ª—é—á–∏—Ç—å RTCP

// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è RTCP
if session.IsRTCPEnabled() {
    fmt.Println("RTCP –≤–∫–ª—é—á–µ–Ω")
}

// –ü–æ–ª—É—á–µ–Ω–∏–µ RTCP —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
stats := session.GetRTCPStatistics()
fmt.Printf("RTCP: –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ %d –ø–∞–∫–µ—Ç–æ–≤, –ø–æ–ª—É—á–µ–Ω–æ %d\n", 
    stats.PacketsSent, stats.PacketsReceived)
fmt.Printf("–ü–æ—Ç–µ—Ä–∏: %d%%, Jitter: %d\n", 
    stats.FractionLost, stats.Jitter)

// –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ RTCP –æ—Ç—á–µ—Ç–∞
err = session.SendRTCPReport()

// –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ RTCP
session.SetRTCPHandler(func(report media.RTCPReport) {
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ RTCP –æ—Ç—á–µ—Ç–∞
})

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞
if session.HasRTCPHandler() {
    fmt.Println("–û–±—Ä–∞–±–æ—Ç—á–∏–∫ RTCP —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω")
}

// –£–¥–∞–ª–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞
session.ClearRTCPHandler()
```

### AudioProcessor
–û–±—Ä–∞–±–æ—Ç–∫–∞ –∞—É–¥–∏–æ –¥–∞–Ω–Ω—ã—Ö:

```go
processorConfig := media.DefaultAudioProcessorConfig()
processorConfig.PayloadType = media.PayloadTypePCMU
processorConfig.EnableAGC = true
processorConfig.EnableNR = true

processor := media.NewAudioProcessor(processorConfig)

// –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å—Ö–æ–¥—è—â–µ–≥–æ –∞—É–¥–∏–æ
processedData, err := processor.ProcessOutgoing(rawAudio)

// –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Ö–æ–¥—è—â–µ–≥–æ –∞—É–¥–∏–æ  
decodedData, err := processor.ProcessIncoming(rtpPayload)
```

## üéõÔ∏è –†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã

### –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ–¥–∏–∞ –ø–æ—Ç–æ–∫–∞

–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ–¥–∏–∞ –ø–æ—Ç–æ–∫–∞ —Ç–µ–ø–µ—Ä—å —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ RTP —Å–µ—Å—Å–∏–π:

- **sendrecv**: –î–≤—É–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –ø–æ—Ç–æ–∫
- **sendonly**: –¢–æ–ª—å–∫–æ –æ—Ç–ø—Ä–∞–≤–∫–∞ –∞—É–¥–∏–æ
- **recvonly**: –¢–æ–ª—å–∫–æ –ø—Ä–∏–µ–º –∞—É–¥–∏–æ  
- **inactive**: –ú–µ–¥–∏–∞ –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ

```go
// –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ RTP —Å–µ—Å—Å–∏–∏
// –ù–∞–ø—Ä–∏–º–µ—Ä: rtpSession.SetDirection(rtp.DirectionSendOnly)

// –ú–µ–¥–∏–∞ —Å–µ—Å—Å–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
// –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö RTP —Å–µ—Å—Å–∏–π
```

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Packet Time

```go
// –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è: 10ms, 20ms, 30ms, 40ms
err := session.SetPtime(time.Millisecond * 20)

// –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è
currentPtime := session.GetPtime()

// –†–∞–∑–º–µ—Ä –ø–∞–∫–µ—Ç–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç ptime –∏ –∫–æ–¥–µ–∫–∞
// –î–ª—è G.711 (8kHz): 20ms = 160 –±–∞–π—Ç, 10ms = 80 –±–∞–π—Ç
```

## üéµ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –∫–æ–¥–µ–∫–∏

| –ö–æ–¥–µ–∫ | Payload Type | –ß–∞—Å—Ç–æ—Ç–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|-------------|---------|----------|
| G.711 Œº-law (PCMU) | 0 | 8 kHz | –°—Ç–∞–Ω–¥–∞—Ä—Ç –¥–ª—è —Ç–µ–ª–µ—Ñ–æ–Ω–∏–∏ |
| G.711 A-law (PCMA) | 8 | 8 kHz | –ï–≤—Ä–æ–ø–µ–π—Å–∫–∏–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç |
| G.722 | 9 | 16 kHz | –®–∏—Ä–æ–∫–æ–ø–æ–ª–æ—Å–Ω—ã–π |
| GSM 06.10 | 3 | 8 kHz | –ú–æ–±–∏–ª—å–Ω–∞—è —Å–≤—è–∑—å |
| G.728 | 15 | 8 kHz | –ù–∏–∑–∫–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ |
| G.729 | 18 | 8 kHz | –ù–∏–∑–∫–∏–π –±–∏—Ç—Ä–µ–π—Ç |

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### –û—Å–Ω–æ–≤–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –º–µ–¥–∏–∞ —Å–µ—Å—Å–∏–∏
```go
stats := session.GetStatistics()
fmt.Printf("–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ: %d –ø–∞–∫–µ—Ç–æ–≤ (%d –±–∞–π—Ç)\n", 
    stats.AudioPacketsSent, stats.AudioBytesSent)
fmt.Printf("–ü–æ–ª—É—á–µ–Ω–æ: %d –ø–∞–∫–µ—Ç–æ–≤ (%d –±–∞–π—Ç)\n", 
    stats.AudioPacketsReceived, stats.AudioBytesReceived)
fmt.Printf("DTMF: %d –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ, %d –ø–æ–ª—É—á–µ–Ω–æ\n", 
    stats.DTMFEventsSent, stats.DTMFEventsReceived)
fmt.Printf("–ü–æ—Ç–µ—Ä–∏: %.2f%%\n", stats.PacketLossRate)
```

### RTCP —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–∞)
```go
if session.IsRTCPEnabled() {
    rtcpStats := session.GetRTCPStatistics()
    fmt.Printf("RTCP –ø–∞–∫–µ—Ç–æ–≤ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ: %d\n", rtcpStats.PacketsSent)
    fmt.Printf("RTCP –ø–∞–∫–µ—Ç–æ–≤ –ø–æ–ª—É—á–µ–Ω–æ: %d\n", rtcpStats.PacketsReceived)
    fmt.Printf("RTCP –æ–∫—Ç–µ—Ç–æ–≤ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ: %d\n", rtcpStats.OctetsSent)
    fmt.Printf("RTCP –æ–∫—Ç–µ—Ç–æ–≤ –ø–æ–ª—É—á–µ–Ω–æ: %d\n", rtcpStats.OctetsReceived)
    fmt.Printf("–ü–æ—Ç–µ—Ä–∏ –ø–∞–∫–µ—Ç–æ–≤: %d\n", rtcpStats.PacketsLost)
    fmt.Printf("–î–æ–ª—è –ø–æ—Ç–µ—Ä—å: %d%%\n", rtcpStats.FractionLost)
    fmt.Printf("Jitter: %d\n", rtcpStats.Jitter)
    fmt.Printf("–ü–æ—Å–ª–µ–¥–Ω–∏–π SR: %v\n", rtcpStats.LastSRReceived)
}
```

## üîó –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å RTP —Å–ª–æ–µ–º

–ú–µ–¥–∏–∞ —Å–ª–æ–π —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–≤–µ—Ä—Ö RTP —Å–ª–æ—è:

```go
// –î–æ–±–∞–≤–ª–µ–Ω–∏–µ RTP —Å–µ—Å—Å–∏–∏ –∫ –º–µ–¥–∏–∞ —Å–µ—Å—Å–∏–∏
rtpSession, err := rtp.NewSession(rtpConfig)
if err != nil {
    return err
}

err = mediaSession.AddRTPSession("primary", rtpSession)
if err != nil {
    return err
}

// –£–¥–∞–ª–µ–Ω–∏–µ RTP —Å–µ—Å—Å–∏–∏
err = mediaSession.RemoveRTPSession("primary")
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```go
package main

import (
    "fmt"
    "time"
    "path/to/your/pkg/media"
)

func main() {
    // –°–æ–∑–¥–∞–Ω–∏–µ –º–µ–¥–∏–∞ —Å–µ—Å—Å–∏–∏
    config := media.DefaultMediaSessionConfig()
    config.SessionID = "my-call"
    
    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
    config.OnAudioReceived = func(data []byte, pt media.PayloadType, ptime time.Duration) {
        fmt.Printf("–ü–æ–ª—É—á–µ–Ω –∞—É–¥–∏–æ: %d –±–∞–π—Ç\n", len(data))
    }
    
    config.OnDTMFReceived = func(event media.DTMFEvent) {
        fmt.Printf("DTMF: %s\n", event.Digit)
    }
    
    // –°–æ–∑–¥–∞–Ω–∏–µ –∏ –∑–∞–ø—É—Å–∫
    session, err := media.NewMediaSession(config)
    if err != nil {
        panic(err)
    }
    defer session.Stop()
    
    if err := session.Start(); err != nil {
        panic(err)
    }
    
    // –†–∞–∑–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã –æ—Ç–ø—Ä–∞–≤–∫–∏ –∞—É–¥–∏–æ
    rawPCM := make([]byte, 160)      // 20ms —Å—ã—Ä—ã–µ PCM –¥–∞–Ω–Ω—ã–µ
    encodedG711 := make([]byte, 160) // 20ms G.711 –¥–∞–Ω–Ω—ã–µ
    
    for i := 0; i < 100; i++ {
        // –°–ø–æ—Å–æ–± 1: —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π —á–µ—Ä–µ–∑ –∞—É–¥–∏–æ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä
        session.SendAudio(rawPCM)
        
        // –°–ø–æ—Å–æ–± 2: —É–∂–µ –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –±–µ–∑ –æ–±—Ä–∞–±–æ—Ç–∫–∏
        session.SendAudioRaw(encodedG711)
        
        // –°–ø–æ—Å–æ–± 3: –ø—Ä—è–º–∞—è –∑–∞–ø–∏—Å—å (—Å–∞–º—ã–π –±—ã—Å—Ç—Ä—ã–π)
        session.WriteAudioDirect(encodedG711)
        
        time.Sleep(time.Millisecond * 20)
    }
    
    // –û—Ç–ø—Ä–∞–≤–∫–∞ DTMF
    session.SendDTMF(media.DTMF1, time.Millisecond*100)
}
```

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

```go
config := media.DefaultMediaSessionConfig()
// Direction —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ RTP —Å–µ—Å—Å–∏–∏
// Ptime: 20ms
// PayloadType: PayloadTypePCMU (G.711 Œº-law)
// JitterEnabled: true
// JitterBufferSize: 10 –ø–∞–∫–µ—Ç–æ–≤
// JitterDelay: 60ms
// DTMFEnabled: true
// DTMFPayloadType: 101 (RFC 4733)
```

## üõ†Ô∏è –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –ú–µ—Ç–æ–¥—ã –æ—Ç–ø—Ä–∞–≤–∫–∏ –∞—É–¥–∏–æ

#### SendAudio() - —Å –ø–æ–ª–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π
```go
// –°—ã—Ä—ã–µ PCM –¥–∞–Ω–Ω—ã–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ –∞—É–¥–∏–æ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä
rawPCM := make([]byte, 160) // 20ms –¥–ª—è 8kHz
err := session.SendAudio(rawPCM)
```

#### SendAudioRaw() - —É–∂–µ –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
```go
// –î–∞–Ω–Ω—ã–µ —É–∂–µ –≤ –Ω—É–∂–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ, –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
encodedG711 := make([]byte, 160)
err := session.SendAudioRaw(encodedG711)
```

#### SendAudioWithFormat() - —Å —É–∫–∞–∑–∞–Ω–∏–µ–º —Ñ–æ—Ä–º–∞—Ç–∞
```go
// –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ —Å –≤—ã–±–æ—Ä–æ–º –æ–±—Ä–∞–±–æ—Ç–∫–∏
err := session.SendAudioWithFormat(audioData, media.PayloadTypePCMA, false)
// skipProcessing = true –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –±–µ–∑ –æ–±—Ä–∞–±–æ—Ç–∫–∏
err := session.SendAudioWithFormat(encodedData, media.PayloadTypePCMA, true)
```

#### WriteAudioDirect() - –ø—Ä—è–º–∞—è –∑–∞–ø–∏—Å—å (‚ö†Ô∏è –Ω–∞—Ä—É—à–∞–µ—Ç timing!)
```go
// ‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï: –ù–∞—Ä—É—à–∞–µ—Ç timing RTP –ø–æ—Ç–æ–∫–∞! –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ –≤ –æ—Å–æ–±—ã—Ö —Å–ª—É—á–∞—è—Ö
rtpPayload := make([]byte, 160)
err := session.WriteAudioDirect(rtpPayload)
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞—É–¥–∏–æ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞
```go
audioConfig := media.AudioProcessorConfig{
    PayloadType:    media.PayloadTypePCMU,
    Ptime:          time.Millisecond * 20,
    SampleRate:     8000,
    Channels:       1,
    EnableAGC:      true,   // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–≥—É–ª–∏—Ä–æ–≤–∫–∞ —É—Å–∏–ª–µ–Ω–∏—è
    EnableNR:       true,   // –®—É–º–æ–ø–æ–¥–∞–≤–ª–µ–Ω–∏–µ
    EnableEcho:     false,  // –≠—Ö–æ–ø–æ–¥–∞–≤–ª–µ–Ω–∏–µ (–Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)
    AGCTargetLevel: 0.7,    // –¶–µ–ª–µ–≤–æ–π —É—Ä–æ–≤–µ–Ω—å AGC
}
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–¥–µ–∫–∞ –≤–æ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã
```go
// –ò–∑–º–µ–Ω–µ–Ω–∏–µ payload —Ç–∏–ø–∞
err := session.SetPayloadType(media.PayloadTypeG722)

// –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ —Ç–∏–ø–∞
currentType := session.GetPayloadType()

// –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–æ–¥–µ–∫–µ
expectedSize := session.getExpectedPayloadSize()
codecName := session.getPayloadTypeName()
```

### üìû DTMF callback - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–∏–º–≤–æ–ª–æ–≤ –ø–æ –æ–¥–Ω–æ–π —Ä—É–Ω–µ

DTMF —Å–æ–±—ã—Ç–∏—è –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è **–Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ** –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å–∏–º–≤–æ–ª–∞:

```go
config.OnDTMFReceived = func(event DTMFEvent) {
    fmt.Printf("–ù–∞–∂–∞—Ç–∞ –∫–ª–∞–≤–∏—à–∞: %s\n", event.Digit.String())
    // –í—ã–∑—ã–≤–∞–µ—Ç—Å—è —Å—Ä–∞–∑—É –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏, –Ω–µ –∂–¥–µ—Ç –æ–∫–æ–Ω—á–∞–Ω–∏—è
}
```

### üì¶ –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—ã—Ä—ã—Ö RTP –ø–∞–∫–µ—Ç–æ–≤

–ú–µ–¥–∏–∞ —Å–µ—Å—Å–∏—è –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–≤–∞ —Ä–µ–∂–∏–º–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—Ö–æ–¥—è—â–∏—Ö **–∞—É–¥–∏–æ** –ø–∞–∫–µ—Ç–æ–≤:

#### –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ä–µ–∂–∏–º (—Å –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ–º)
```go
config.OnAudioReceived = func(audioData []byte, payloadType PayloadType, ptime time.Duration) {
    // –ü–æ–ª—É—á–∞–µ–º –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∞—É–¥–∏–æ –≥–æ—Ç–æ–≤–æ–µ –∫ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—é
    fmt.Printf("–î–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∞—É–¥–∏–æ: %d –±–∞–π—Ç\n", len(audioData))
}
```

#### –†–µ–∂–∏–º —Å—ã—Ä—ã—Ö –∞—É–¥–∏–æ –ø–∞–∫–µ—Ç–æ–≤ (–±–µ–∑ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è)
```go
config.OnRawPacketReceived = func(packet *rtp.Packet) {
    // –ü–æ–ª—É—á–∞–µ–º —Å—ã—Ä–æ–π –∞—É–¥–∏–æ RTP –ø–∞–∫–µ—Ç –¥–ª—è —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
    // DTMF –ø–∞–∫–µ—Ç—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ DTMF callback
    fmt.Printf("–ê—É–¥–∏–æ RTP –ø–∞–∫–µ—Ç: seq=%d, ts=%d, payload=%d –±–∞–π—Ç\n",
        packet.SequenceNumber, packet.Timestamp, len(packet.Payload))
}

// –ò–ª–∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏
session.SetRawPacketHandler(func(packet *rtp.Packet) {
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å—ã—Ä—ã—Ö –∞—É–¥–∏–æ –ø–∞–∫–µ—Ç–æ–≤
    // DTMF –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —á–µ—Ä–µ–∑ OnDTMFReceived callback
})
```

#### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞–º–∏
```go
// –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è raw handler –¥–ª—è –∞—É–¥–∏–æ
hasRawHandler := session.HasRawPacketHandler()

// –û—á–∏—Å—Ç–∫–∞ raw handler (–≤–æ–∑–≤—Ä–∞—Ç –∫ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–µ –∞—É–¥–∏–æ)
// DTMF callback –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ
session.ClearRawPacketHandler()
```

#### –í–∞–∂–Ω–æ!
- **DTMF –ø–∞–∫–µ—Ç—ã** –≤—Å–µ–≥–¥–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ `OnDTMFReceived` callback
- **DTMF callback –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ** –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å–∏–º–≤–æ–ª–∞ (–ø–æ –æ–¥–Ω–æ–π —Ä—É–Ω–µ)
- **Raw callback** –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫ **–∞—É–¥–∏–æ –ø–∞–∫–µ—Ç–∞–º**
- –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—É—á–∞—Ç—å —Å—ã—Ä—ã–µ –∞—É–¥–∏–æ –¥–∞–Ω–Ω—ã–µ, –Ω–æ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å DTMF —Å–æ–±—ã—Ç–∏—è

#### –ü—Ä–∏–º–µ—Ä DTMF callback
```go
config.OnDTMFReceived = func(event DTMFEvent) {
    fmt.Printf("üìû –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∞–ª: %s\n", event.Digit.String())
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ, –Ω–µ –∂–¥–µ—Ç –æ–∫–æ–Ω—á–∞–Ω–∏—è —Å–æ–±—ã—Ç–∏—è
}
```

### üéØ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π RTP Timing

–ú–µ–¥–∏–∞ —Å–µ—Å—Å–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π timing RTP –ø–æ—Ç–æ–∫–∞:

#### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:
- **–ù–∞–∫–æ–ø–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö**: –í—Å–µ –∞—É–¥–∏–æ –¥–∞–Ω–Ω—ã–µ –Ω–∞–∫–∞–ø–ª–∏–≤–∞—é—Ç—Å—è –≤–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–º –±—É—Ñ–µ—Ä–µ
- **–†–µ–≥—É–ª—è—Ä–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞**: –¢–∏–∫–µ—Ä –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–∞–∫–µ—Ç—ã —Å –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º —Ä–∞–≤–Ω—ã–º `ptime`
- **–¢–æ—á–Ω—ã–π timing**: –ú–µ–∂–¥—É –æ—Ç–ø—Ä–∞–≤–∫–∞–º–∏ –ø–∞–∫–µ—Ç–æ–≤ –≤—Å–µ–≥–¥–∞ –ø–∞—É–∑–∞ —Ä–∞–≤–Ω–∞—è `ptime`
- **–ë—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è**: –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –ø–∞–∫–µ—Ç–∞, –æ–∂–∏–¥–∞–µ—Ç—Å—è –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–µ

#### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ RTP –ø–æ—Ç–æ–∫–∞:
```go
// –†–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö –≤ –±—É—Ñ–µ—Ä–µ –æ—Ç–ø—Ä–∞–≤–∫–∏
bufferSize := session.GetBufferedAudioSize()

// –í—Ä–µ–º—è —Å –ø–æ—Å–ª–µ–¥–Ω–µ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–∞–∫–µ—Ç–∞
timeSinceLastSend := session.GetTimeSinceLastSend()

// –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –±—É—Ñ–µ—Ä–∞ (–ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏)
err := session.FlushAudioBuffer()
```

#### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
- ‚úÖ **–°—Ç–∞–±–∏–ª—å–Ω—ã–π –¥–∂–∏—Ç—Ç–µ—Ä** –Ω–∞ –ø—Ä–∏–µ–º–Ω–∏–∫–µ
- ‚úÖ **–†–∞–≤–Ω–æ–º–µ—Ä–Ω—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã** –º–µ–∂–¥—É –ø–∞–∫–µ—Ç–∞–º–∏  
- ‚úÖ **–û–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ** –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
- ‚úÖ **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è —Ä–∞–±–æ—Ç–∞** jitter buffer –Ω–∞ –ø—Ä–∏–µ–º–Ω–∏–∫–µ

#### –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã:
- üìå –ú–µ—Ç–æ–¥—ã `SendAudio*()` –¥–æ–±–∞–≤–ª—è—é—Ç –¥–∞–Ω–Ω—ã–µ –≤ –±—É—Ñ–µ—Ä —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º timing
- ‚ö†Ô∏è –ú–µ—Ç–æ–¥ `WriteAudioDirect()` –Ω–∞—Ä—É—à–∞–µ—Ç timing –∏ –¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ
- üîÑ –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ `ptime` –±—É—Ñ–µ—Ä –æ—á–∏—â–∞–µ—Ç—Å—è –∏ timing –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è
- ‚è±Ô∏è **–¢–∏–∫–µ—Ä –æ—Ç–ø—Ä–∞–≤–∫–∏** —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º —Ä–∞–≤–Ω—ã–º `ptime` (20ms –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- üì¶ **–ë—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö** –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω—ã–π –ø–æ—Ç–æ–∫ –±–µ–∑ –¥–∂–∏—Ç—Ç–µ—Ä–∞

### Jitter Buffer —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
```go
if session.jitterBuffer != nil {
    jitterStats := session.jitterBuffer.GetStatistics()
    fmt.Printf("–†–∞–∑–º–µ—Ä –±—É—Ñ–µ—Ä–∞: %d/%d\n", 
        jitterStats.BufferSize, jitterStats.MaxBufferSize)
    fmt.Printf("–ó–∞–¥–µ—Ä–∂–∫–∞: %v (—Ü–µ–ª—å: %v)\n", 
        jitterStats.CurrentDelay, jitterStats.TargetDelay)
    fmt.Printf("–ü–æ—Ç–µ—Ä–∏: %.2f%%\n", jitterStats.PacketLossRate)
}
```

## üêõ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

```go
config.OnMediaError = func(err error) {
    log.Printf("–û—à–∏–±–∫–∞ –º–µ–¥–∏–∞: %v", err)
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (–ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ, fallback –∫–æ–¥–µ–∫ –∏ —Ç.–¥.)
}
```

## üìù –ü—Ä–∏–º–µ—Ä—ã

–í —Ñ–∞–π–ª–µ `example_softphone.go` —Å–æ–¥–µ—Ä–∂–∞—Ç—Å—è –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –º–µ–¥–∏–∞ —Å–ª–æ—è.

## üîÑ –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

- **RFC 3550**: RTP –ø—Ä–æ—Ç–æ–∫–æ–ª
- **RFC 3551**: RTP –ø—Ä–æ—Ñ–∏–ª–∏ –¥–ª—è –∞—É–¥–∏–æ/–≤–∏–¥–µ–æ
- **RFC 4733**: DTMF —Å–æ–±—ã—Ç–∏—è –≤ RTP
- **Golang**: 1.18+
- **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: github.com/pion/rtp
