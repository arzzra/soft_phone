# –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è media_builder

–≠—Ç–æ—Ç –∫–∞—Ç–∞–ª–æ–≥ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–∞–∫–µ—Ç–∞ `media_builder` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–µ–¥–∏–∞ —Å–µ—Å—Å–∏—è–º–∏ –≤ SIP —Å–æ—Ñ—Ç—Ñ–æ–Ω–µ.

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [basic_call.go](#basic_callgo) - –ë–∞–∑–æ–≤—ã–π –∑–≤–æ–Ω–æ–∫ –º–µ–∂–¥—É –¥–≤—É–º—è —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏
2. [conference_call.go](#conference_callgo) - –ö–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏—è —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏
3. [advanced_features.go](#advanced_featuresgo) - –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
4. [port_management.go](#port_managementgo) - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Ä—Ç–∞–º–∏
5. [stress_test_example.go](#stress_test_examplego) - –ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
6. [integration_example.go](#integration_examplego) - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Go 1.18 –∏–ª–∏ –≤—ã—à–µ
- –ü–∞–∫–µ—Ç `github.com/arzzra/soft_phone`
- –°–≤–æ–±–æ–¥–Ω—ã–µ –ø–æ—Ä—Ç—ã –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ 10000-65000

## –ó–∞–ø—É—Å–∫ –ø—Ä–∏–º–µ—Ä–æ–≤

–ö–∞–∂–¥—ã–π –ø—Ä–∏–º–µ—Ä –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ:

```bash
# –ë–∞–∑–æ–≤—ã–π –∑–≤–æ–Ω–æ–∫
go run basic_call.go

# –ö–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏—è
go run conference_call.go

# –ò —Ç–∞–∫ –¥–∞–ª–µ–µ...
```

## –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–∏–º–µ—Ä–æ–≤

### basic_call.go

–î–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –æ—Å–Ω–æ–≤—ã —Ä–∞–±–æ—Ç—ã —Å `media_builder`:

- –°–æ–∑–¥–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ `BuilderManager`
- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –º–µ–∂–¥—É –¥–≤—É–º—è —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏
- SDP offer/answer –æ–±–º–µ–Ω
- –û—Ç–ø—Ä–∞–≤–∫–∞ –∏ –ø—Ä–∏–µ–º –∞—É–¥–∏–æ –¥–∞–Ω–Ω—ã—Ö
- –û—Ç–ø—Ä–∞–≤–∫–∞ DTMF —Å–∏–≥–Ω–∞–ª–æ–≤
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∑–≤–æ–Ω–∫–∞

**–ö–ª—é—á–µ–≤—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏:**
- Builder —Å–æ–∑–¥–∞–µ—Ç –º–µ–¥–∏–∞ —Å–µ—Å—Å–∏—é —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ –∞–¥—Ä–µ—Å–∞
- –ö–∞–∂–¥—ã–π —É—á–∞—Å—Ç–Ω–∏–∫ —Ç—Ä–µ–±—É–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ Builder'–∞
- –ú–µ–¥–∏–∞ —Å–µ—Å—Å–∏–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —è–≤–Ω–æ –∑–∞–ø—É—â–µ–Ω—ã —á–µ—Ä–µ–∑ `Start()`

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:**
```
üìû –ü—Ä–∏–º–µ—Ä –±–∞–∑–æ–≤–æ–≥–æ –∑–≤–æ–Ω–∫–∞ —Å media_builder
‚úÖ –ú–µ–Ω–µ–¥–∂–µ—Ä —Å–æ–∑–¥–∞–Ω. –î–æ—Å—Ç—É–ø–Ω–æ –ø–æ—Ä—Ç–æ–≤: 50
üì± –°–æ–∑–¥–∞–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∑–≤–æ–Ω–∫–∞...
ü§ù SDP —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ...
üé¨ –ó–∞–ø—É—Å–∫ –º–µ–¥–∏–∞ —Å–µ—Å—Å–∏–π...
üéµ –ù–∞—á–∏–Ω–∞–µ–º –æ–±–º–µ–Ω –∞—É–¥–∏–æ...
‚òéÔ∏è  –û—Ç–ø—Ä–∞–≤–∫–∞ DTMF —Å–∏–≥–Ω–∞–ª–æ–≤...
üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–≤–æ–Ω–∫–∞:
  [caller] –ê—É–¥–∏–æ: 5 –ø–∞–∫–µ—Ç–æ–≤, 800 –±–∞–π—Ç
  [callee] DTMF: [1 2 3 4 5 6]
```

### conference_call.go

–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏–∏ —Å –ø–æ–ª–Ω–æ—Å–≤—è–∑–Ω–æ–π —Ç–æ–ø–æ–ª–æ–≥–∏–µ–π:

- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏
- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –º–µ–∂–¥—É –≤—Å–µ–º–∏ –ø–∞—Ä–∞–º–∏ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ (full mesh)
- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
- Broadcast –∞—É–¥–∏–æ –∏ DTMF –≤—Å–µ–º —É—á–∞—Å—Ç–Ω–∏–∫–∞–º
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏–∏

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**
```
Alice ‚Üê‚Üí Bob
  ‚Üì  ‚úï  ‚Üë
Charlie ‚Üê‚Üí Diana
```

**–í–∞–∂–Ω–æ:** –ö–∞–∂–¥–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Ç—Ä–µ–±—É–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–π –ø–∞—Ä—ã Builder'–æ–≤

### advanced_features.go

–î–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:

1. **–ò–∑–º–µ–Ω–µ–Ω–∏–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–µ–¥–∏–∞**
   - sendrecv ‚Üí sendonly/recvonly ‚Üí inactive
   - –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Ç–æ–∫–∞–º–∏

2. **–ü–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ —Å–±–æ—è**
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞–∑—Ä—ã–≤–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
   - –≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –ø—Ä–∏ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Å—Å–∏–∏

3. **–°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ –∫–æ–¥–µ–∫–æ–≤**
   - –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –∫–æ–¥–µ–∫–æ–≤
   - –í—ã–±–æ—Ä –æ–±—â–µ–≥–æ –∫–æ–¥–µ–∫–∞
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

4. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–∞—á–µ—Å—Ç–≤–∞ (RTCP)**
   - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ jitter –∏ –ø–æ—Ç–µ—Ä—å –ø–∞–∫–µ—Ç–æ–≤
   - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∫–∞—á–µ—Å—Ç–≤—É —Å–≤—è–∑–∏

5. **–ö–∞—Å—Ç–æ–º–Ω—ã–µ SDP –∞—Ç—Ä–∏–±—É—Ç—ã**
   - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∞—Ç—Ä–∏–±—É—Ç–æ–≤
   - –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

### port_management.go

–£–≥–ª—É–±–ª–µ–Ω–Ω–æ–µ –∏–∑—É—á–µ–Ω–∏–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ—Ä—Ç–∞–º–∏:

1. **–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–µ –≤—ã–¥–µ–ª–µ–Ω–∏–µ**
   - –ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–µ –≤—ã–¥–µ–ª–µ–Ω–∏–µ –ø–æ—Ä—Ç–æ–≤
   - –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–Ω—ã—Ö –ø–æ—Ä—Ç–æ–≤

2. **–°–ª—É—á–∞–π–Ω–æ–µ –≤—ã–¥–µ–ª–µ–Ω–∏–µ**
   - –ü–æ–≤—ã—à–µ–Ω–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
   - –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏

3. **–ò—Å—á–µ—Ä–ø–∞–Ω–∏–µ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ**
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∞ –ø–æ—Ä—Ç–æ–≤
   - –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è

4. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**
   - –†–µ–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è
   - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

5. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–∏–∞–ø–∞–∑–æ–Ω–∞**
   - –†–∞—Å—á–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ—Ä—Ç–æ–≤
   - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ

### stress_test_example.go

–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥ –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–æ–π:

1. **–ú–∞—Å—Å–æ–≤–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π**
   - 100+ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
   - –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞

2. **DTMF —à—Ç–æ—Ä–º**
   - –ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ DTMF
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏–π

3. **–ë—ã—Å—Ç—Ä–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ**
   - –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–π
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Ç–µ—á–µ–∫ —Ä–µ—Å—É—Ä—Å–æ–≤

4. **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞**
   - –°–º–µ—à–∞–Ω–Ω—ã–µ —Ç–∏–ø—ã –æ–ø–µ—Ä–∞—Ü–∏–π
   - –ö–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã–π –¥–æ—Å—Ç—É–ø

5. **–î–æ–ª–≥–æ–∏–≥—Ä–∞—é—â–∏–µ —Å–µ—Å—Å–∏–∏**
   - –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏ –¥–ª–∏—Ç–µ–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç–µ
   - –ù–∞–∫–æ–ø–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

**–ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:**
- Builder'–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É
- –°–æ–µ–¥–∏–Ω–µ–Ω–∏–π –≤ —Å–µ–∫—É–Ω–¥—É
- –ü–∞–∫–µ—Ç–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É
- –ü—Ä–æ—Ü–µ–Ω—Ç —É—Å–ø–µ—à–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

### integration_example.go

–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¥—Ä—É–≥–∏–º–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏ —Å–æ—Ñ—Ç—Ñ–æ–Ω–∞:

1. **–ê—É–¥–∏–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∏**
   - –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Ç–æ–Ω–æ–≤
   - –§–∞–π–ª–æ–≤–æ–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ
   - –ú–∏–∫—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤

2. **–ó–∞–ø–∏—Å—å –∑–≤–æ–Ω–∫–æ–≤**
   - –ë—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è –∞—É–¥–∏–æ
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ —Ñ–∞–π–ª
   - –ê–Ω–∞–ª–∏–∑ –∑–∞–ø–∏—Å–µ–π

3. **–¢—Ä–∞–Ω—Å–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –º–µ–∂–¥—É –∫–æ–¥–µ–∫–∞–º–∏
   - –ú–æ—Å—Ç –º–µ–∂–¥—É –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–º–∏ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏

4. **SIP –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ SIP —Å–∏–≥–Ω–∞–ª–∏–∑–∞—Ü–∏–∏
   - Mapping SIP ‚Üî media_builder

5. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –º–µ—Ç—Ä–∏–∫–∏**
   - –≠–∫—Å–ø–æ—Ä—Ç –≤ Prometheus
   - Grafana –¥–∞—à–±–æ—Ä–¥—ã
   - –ê–ª–µ—Ä—Ç—ã –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

### –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª Builder'–∞

```
CreateBuilder() ‚Üí CreateOffer()/ProcessOffer() ‚Üí ProcessAnswer()/CreateAnswer() ‚Üí GetMediaSession() ‚Üí Start() ‚Üí ... ‚Üí Stop() ‚Üí Close() ‚Üí ReleaseBuilder()
```

### –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

1. **–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç —Å–æ–∑–¥–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –∑–Ω–∞–Ω–∏—è –æ–±–æ–∏—Ö –∞–¥—Ä–µ—Å–æ–≤**
   - Caller —Å–æ–∑–¥–∞–µ—Ç —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç –≤ ProcessAnswer()
   - Callee —Å–æ–∑–¥–∞–µ—Ç —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç –≤ CreateAnswer()

2. **–û–¥–∏–Ω Builder = –æ–¥–Ω–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ**
   - –ù–µ–ª—å–∑—è –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Builder –¥–ª—è –Ω–æ–≤–æ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
   - –î–ª—è –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏–∏ –Ω—É–∂–Ω–∞ –ø–∞—Ä–∞ Builder'–æ–≤ –Ω–∞ –∫–∞–∂–¥–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ

3. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞–º–∏**
   - –í—Å–µ–≥–¥–∞ –≤—ã–∑—ã–≤–∞–π—Ç–µ ReleaseBuilder() –ø–æ—Å–ª–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ defer –¥–ª—è –≥–∞—Ä–∞–Ω—Ç–∏–∏ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è
   - Shutdown() –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç –≤—Å–µ —Ä–µ—Å—É—Ä—Å—ã

4. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**
   - –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –≤—Å–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ –æ—à–∏–±–∫–∏
   - –û—Å–≤–æ–±–æ–∂–¥–∞–π—Ç–µ —á–∞—Å—Ç–∏—á–Ω–æ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã
   - –õ–æ–≥–∏—Ä—É–π—Ç–µ –ø—Ä–æ–±–ª–µ–º—ã –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

```go
config := media_builder.DefaultConfig()
config.MinPort = 10000
config.MaxPort = 20000 // 5000 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
config.MaxConcurrentBuilders = 500
config.PortAllocationStrategy = media_builder.PortAllocationRandom
config.SessionTimeout = 5 * time.Minute
config.CleanupInterval = 30 * time.Second
```

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

1. **–î–ª—è –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏:**
   - –£–≤–µ–ª–∏—á—å—Ç–µ –¥–∏–∞–ø–∞–∑–æ–Ω –ø–æ—Ä—Ç–æ–≤
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–ª—É—á–∞–π–Ω–æ–µ –≤—ã–¥–µ–ª–µ–Ω–∏–µ
   - –û—Ç–∫–ª—é—á–∏—Ç–µ –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (RTCP, Jitter Buffer)

2. **–î–ª—è –Ω–∏–∑–∫–æ–π –∑–∞–¥–µ—Ä–∂–∫–∏:**
   - –£–º–µ–Ω—å—à–∏—Ç–µ —Ä–∞–∑–º–µ—Ä –±—É—Ñ–µ—Ä–æ–≤
   - –û—Ç–∫–ª—é—á–∏—Ç–µ –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π jitter buffer
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä—è–º—É—é –æ—Ç–ø—Ä–∞–≤–∫—É –±–µ–∑ –æ–±—Ä–∞–±–æ—Ç–∫–∏

3. **–î–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ —Ä–µ—Å—É—Ä—Å–æ–≤:**
   - –£–º–µ–Ω—å—à–∏—Ç–µ —Ç–∞–π–º–∞—É—Ç—ã —Å–µ—Å—Å–∏–π
   - –ß–∞—â–µ –∑–∞–ø—É—Å–∫–∞–π—Ç–µ –æ—á–∏—Å—Ç–∫—É
   - –û–≥—Ä–∞–Ω–∏—á—å—Ç–µ MaxConcurrentBuilders

## Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: "–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø–æ—Ä—Ç–æ–≤"

**–ü—Ä–∏—á–∏–Ω—ã:**
- –°–ª–∏—à–∫–æ–º –º–∞–ª–µ–Ω—å–∫–∏–π –¥–∏–∞–ø–∞–∑–æ–Ω –ø–æ—Ä—Ç–æ–≤
- –£—Ç–µ—á–∫–∞ Builder'–æ–≤ (–Ω–µ –≤—ã–∑–≤–∞–Ω ReleaseBuilder)
- –ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç MaxConcurrentBuilders

**–†–µ—à–µ–Ω–∏–µ:**
- –£–≤–µ–ª–∏—á—å—Ç–µ –¥–∏–∞–ø–∞–∑–æ–Ω –ø–æ—Ä—Ç–æ–≤
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
- –£–≤–µ–ª–∏—á—å—Ç–µ MaxConcurrentBuilders

### –ü—Ä–æ–±–ª–µ–º–∞: "–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å –º–µ–¥–∏–∞ —Ä–µ—Å—É—Ä—Å—ã"

**–ü—Ä–∏—á–∏–Ω—ã:**
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –≤—ã–∑–æ–≤–æ–≤ (—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç —Å–æ–∑–¥–∞–µ—Ç—Å—è —Å–ª–∏—à–∫–æ–º —Ä–∞–Ω–æ)
- –ù–µ–¥–æ—Å—Ç—É–ø–µ–Ω —É–¥–∞–ª–µ–Ω–Ω—ã–π –∞–¥—Ä–µ—Å
- –ü–æ—Ä—Ç —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
- –°–ª–µ–¥—É–π—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º—É workflow
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ SDP negotiation
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –ø–æ—Ä—Ç—ã

### –ü—Ä–æ–±–ª–µ–º–∞: "–ê—É–¥–∏–æ –Ω–µ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è"

**–ü—Ä–∏—á–∏–Ω—ã:**
- –ú–µ–¥–∏–∞ —Å–µ—Å—Å–∏—è –Ω–µ –∑–∞–ø—É—â–µ–Ω–∞ (–∑–∞–±—ã–ª–∏ Start())
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ–¥–∏–∞
- Firewall –±–ª–æ–∫–∏—Ä—É–µ—Ç UDP

**–†–µ—à–µ–Ω–∏–µ:**
- –í—ã–∑–æ–≤–∏—Ç–µ Start() –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è —Å–µ—Å—Å–∏–∏
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (sendrecv)
- –û—Ç–∫—Ä–æ–π—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–æ—Ä—Ç—ã

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è media_builder](../../pkg/media_builder/doc.go)
- [RFC 3264 - SDP Offer/Answer Model](https://tools.ietf.org/html/rfc3264)
- [RFC 4733 - RTP Payload for DTMF](https://tools.ietf.org/html/rfc4733)

## –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–∏–º–µ—Ä—ã —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è—é—Ç—Å—è –ø–æ–¥ —Ç–æ–π –∂–µ –ª–∏—Ü–µ–Ω–∑–∏–µ–π, —á—Ç–æ –∏ –æ—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ–µ–∫—Ç.