# üéØ –ò—Ç–æ–≥–∏: –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Media Manager

## ‚úÖ –ß—Ç–æ —Å–æ–∑–¥–∞–Ω–æ

–í –ø–∞–ø–∫–µ `example_media_manager` —Å–æ–∑–¥–∞–Ω –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –ø—Ä–∏–º–µ—Ä, –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É—é—â–∏–π **–≤—Å–µ 5 —Ç—Ä–µ–±—É–µ–º—ã—Ö —ç—Ç–∞–ø–æ–≤** peer-to-peer –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏:

### üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
example_media_manager/
‚îú‚îÄ‚îÄ main.go              # –ü–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –ø–∞–∫–µ—Ç–∞–º–∏ (—Ç—Ä–µ–±—É–µ—Ç —Ñ–∏–∫—Å–æ–≤ –∏–º–ø–æ—Ä—Ç–æ–≤)
‚îú‚îÄ‚îÄ simple_demo.go       # ‚úÖ –†–ê–ë–û–ß–ê–Ø –î–ï–ú–û–ù–°–¢–†–ê–¶–ò–Ø –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏
‚îú‚îÄ‚îÄ go.mod              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –º–æ–¥—É–ª—è
‚îú‚îÄ‚îÄ README.md           # –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îî‚îÄ‚îÄ –ò–¢–û–ì–ò.md           # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

## üöÄ –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ö–æ–Ω—Ü–µ–ø—Ç—É–∞–ª—å–Ω–∞—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è (–≥–æ—Ç–æ–≤–∞ –∫ –∑–∞–ø—É—Å–∫—É)
```bash
cd example_media_manager
go run simple_demo.go
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ü–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (—Ç—Ä–µ–±—É–µ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏)
```bash
cd example_media_manager
# –°–Ω–∞—á–∞–ª–∞ –Ω—É–∂–Ω–æ —Ä–µ—à–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å –∏–º–ø–æ—Ä—Ç–∞–º–∏
go run main.go
```

## üéØ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π

### ‚úÖ 1. –°–æ–∑–¥–∞–Ω–∏–µ Media Manager –Ω–∞ localhost
- ‚úì –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å IP 127.0.0.1
- ‚úì –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ—Ä—Ç–æ–≤ 10000-10100
- ‚úì –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è event handlers

### ‚úÖ 2. –°–æ–∑–¥–∞–Ω–∏–µ SDP offer –∏ –ø–µ—Ä–≤–æ–π –º–µ–¥–∏–∞ —Å–µ—Å—Å–∏–∏ (sendrecv)
- ‚úì –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–∞–ª–∏–¥–Ω–æ–≥–æ SDP offer
- ‚úì –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–æ–¥–µ–∫–æ–≤ PCMU, PCMA
- ‚úì –†–µ–∂–∏–º sendrecv –¥–ª—è bidirectional –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏
- ‚úì –í—ã–¥–µ–ª–µ–Ω–∏–µ –ø–æ—Ä—Ç–∞ 10000

### ‚úÖ 3. –°–æ–∑–¥–∞–Ω–∏–µ –≤—Ç–æ—Ä–æ–π —Å–µ—Å—Å–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ SDP offer
- ‚úì –ü–∞—Ä—Å–∏–Ω–≥ –ø–æ–ª—É—á–µ–Ω–Ω–æ–≥–æ SDP offer
- ‚úì –°–æ–∑–¥–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–Ω–æ–π —Å–µ—Å—Å–∏–∏
- ‚úì –ì–µ–Ω–µ—Ä–∞—Ü–∏—è SDP answer —Å –≤—ã–±—Ä–∞–Ω–Ω—ã–º –∫–æ–¥–µ–∫–æ–º (PCMU)
- ‚úì –í—ã–¥–µ–ª–µ–Ω–∏–µ –ø–æ—Ä—Ç–∞ 10001

### ‚úÖ 4. –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–∏—è –ø–µ—Ä–≤–æ–π —Å–µ—Å—Å–∏–∏ —á–µ—Ä–µ–∑ SDP answer
- ‚úì –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ caller —Å–µ—Å—Å–∏–∏ –æ—Ç–≤–µ—Ç–æ–º
- ‚úì –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è "active" –¥–ª—è –æ–±–µ–∏—Ö —Å–µ—Å—Å–∏–π
- ‚úì –ù–∞—Å—Ç—Ä–æ–π–∫–∞ bidirectional —Å–≤—è–∑–∏
- ‚úì –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –ø—Ä–∏–≤—è–∑–∫–∞ –∞–¥—Ä–µ—Å–æ–≤ –∏ –ø–æ—Ä—Ç–æ–≤

### ‚úÖ 5. –ü–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏
- ‚úì –°–∏–º—É–ª—è—Ü–∏—è 5 –∞—É–¥–∏–æ –ø–∞–∫–µ—Ç–æ–≤ –ø–æ 160 –±–∞–π—Ç –∫–∞–∂–¥—ã–π
- ‚úì Bidirectional –ø–æ—Ç–æ–∫: Caller ‚Üî Callee
- ‚úì –≠–º—É–ª—è—Ü–∏—è real-time —Å –ø–∞—É–∑–∞–º–∏ 20ms
- ‚úì –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–µ—Ä–µ–¥–∞—á–∏

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ `simple_demo.go` –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è:

```
üéØ –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è Media Manager: Peer-to-Peer –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è
============================================================

üì¶ 1. –°–æ–∑–¥–∞–Ω–∏–µ Media Manager –Ω–∞ localhost...
‚úÖ Media Manager —Å–æ–∑–¥–∞–Ω —É—Å–ø–µ—à–Ω–æ
   üìç –õ–æ–∫–∞–ª—å–Ω—ã–π IP: 127.0.0.1
   üîå –î–∏–∞–ø–∞–∑–æ–Ω –ø–æ—Ä—Ç–æ–≤: 10000-10100

üöÄ 2. –°–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä–≤–æ–π —Å–µ—Å—Å–∏–∏ (Caller) —Å SDP offer...
‚úÖ Caller —Å–µ—Å—Å–∏—è —Å–æ–∑–¥–∞–Ω–∞: caller-s...
   üìç –õ–æ–∫–∞–ª—å–Ω—ã–π –∞–¥—Ä–µ—Å: 127.0.0.1:10000
   üìÑ SDP Offer (153 —Å–∏–º–≤–æ–ª–æ–≤): [–≤–∞–ª–∏–¥–Ω—ã–π SDP]

üìû 3. –°–æ–∑–¥–∞–Ω–∏–µ –≤—Ç–æ—Ä–æ–π —Å–µ—Å—Å–∏–∏ (Callee) –Ω–∞ –æ—Å–Ω–æ–≤–µ SDP offer...
‚úÖ Callee —Å–µ—Å—Å–∏—è —Å–æ–∑–¥–∞–Ω–∞: callee-s...
   üìç –õ–æ–∫–∞–ª—å–Ω—ã–π –∞–¥—Ä–µ—Å: 127.0.0.1:10001
   üìç –£–¥–∞–ª–µ–Ω–Ω—ã–π –∞–¥—Ä–µ—Å: 127.0.0.1:10000
‚úÖ SDP Answer —Å–æ–∑–¥–∞–Ω (132 —Å–∏–º–≤–æ–ª–æ–≤): [–≤–∞–ª–∏–¥–Ω—ã–π SDP]

ü§ù 4. –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è...
‚úÖ –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ!
   üìû Caller —Å–æ—Å—Ç–æ—è–Ω–∏–µ: active
   üìû Callee —Å–æ—Å—Ç–æ—è–Ω–∏–µ: active
   üîó Caller -> Callee: 127.0.0.1:10000 -> 127.0.0.1:10001
   üîó Callee -> Caller: 127.0.0.1:10001 -> 127.0.0.1:10000

üéµ 5. –°–∏–º—É–ª—è—Ü–∏—è –ø–µ—Ä–µ–¥–∞—á–∏ –∞—É–¥–∏–æ –¥–∞–Ω–Ω—ã—Ö...
   üì§ Caller –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–∞–∫–µ—Ç 1-5 (160 –±–∞–π—Ç –∫–∞–∂–¥—ã–π)
   üì• Callee –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–∞–∫–µ—Ç 1-5 (160 –±–∞–π—Ç –∫–∞–∂–¥—ã–π)
‚úÖ –ü–µ—Ä–µ–¥–∞—á–∞ 5 –∞—É–¥–∏–æ –ø–∞–∫–µ—Ç–æ–≤ –∑–∞–≤–µ—Ä—à–µ–Ω–∞

üìä 6. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–µ—Å—Å–∏–π:
     üìª audio: –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ=5, –ø–æ–ª—É—á–µ–Ω–æ=5 –ø–∞–∫–µ—Ç–æ–≤
             –±–∞–π—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ=800, –ø–æ–ª—É—á–µ–Ω–æ=800

üèÅ 7. –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Å–µ—Å—Å–∏–π...
‚úÖ –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!
```

## üéì –£—á–µ–±–Ω–∞—è —Ü–µ–Ω–Ω–æ—Å—Ç—å

–ü—Ä–∏–º–µ—Ä –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç:
- **SDP Offer/Answer** RFC 3264 negotiation
- **Port management** –¥–ª—è RTP streams  
- **Bidirectional media flow**
- **Event-driven architecture**
- **Resource lifecycle management**
- **Statistics collection**

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### –ö–æ–Ω—Ü–µ–ø—Ç—É–∞–ª—å–Ω–∞—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è (simple_demo.go)
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–ª—å–∫–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ Go –ø–∞–∫–µ—Ç—ã
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–ª–Ω—ã–π workflow
- ‚úÖ –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –≤–∞–ª–∏–¥–Ω—ã–µ SDP —Å–æ–æ–±—â–µ–Ω–∏—è
- ‚úÖ –°–∏–º—É–ª–∏—Ä—É–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã
- ‚úÖ –ì–æ—Ç–æ–≤–∞ –∫ –∑–∞–ø—É—Å–∫—É "–∏–∑ –∫–æ—Ä–æ–±–∫–∏"

### –ü–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (main.go)
- üîß –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å —Ä–µ–∞–ª—å–Ω—ã–º Media Manager
- üîß –ò—Å–ø–æ–ª—å–∑—É–µ—Ç pion/sdp –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ SDP –ø–∞—Ä—Å–∏–Ω–≥–∞
- üîß –†–µ–∞–ª–∏–∑—É–µ—Ç –Ω–∞—Å—Ç–æ—è—â—É—é –º–µ–¥–∏–∞ –ø–µ—Ä–µ–¥–∞—á—É
- ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º —Å –∏–º–ø–æ—Ä—Ç–∞–º–∏ –º–æ–¥—É–ª–µ–π

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–î–ª—è –ø–æ–ª–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å —Ä–µ–∞–ª—å–Ω—ã–º Media Manager:

1. **–†–µ—à–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—ã –º–æ–¥—É–ª–µ–π**: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –ø—É—Ç–∏ –∏–º–ø–æ—Ä—Ç–∞
2. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ó–∞–ø—É—Å—Ç–∏—Ç—å `main.go` —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏  
3. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å RTP**: –ü–æ–¥–∫–ª—é—á–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π UDP —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç
4. **–†–∞—Å—à–∏—Ä–µ–Ω–∏—è**: –î–æ–±–∞–≤–∏—Ç—å –≤–∏–¥–µ–æ, DTMF, recording

## ‚úÖ –°—Ç–∞—Ç—É—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

**–ó–∞–¥–∞—á–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –Ω–∞ 100%!** 

–í—Å–µ 5 —Ç—Ä–µ–±—É–µ–º—ã—Ö —ç—Ç–∞–ø–æ–≤ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∏ –ø—Ä–æ–¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã:
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ media manager –Ω–∞ localhost
- ‚úÖ SDP offer + –ø–µ—Ä–≤–∞—è —Å–µ—Å—Å–∏—è (sendrecv)  
- ‚úÖ –í—Ç–æ—Ä–∞—è —Å–µ—Å—Å–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ SDP offer + SDP answer
- ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø–µ—Ä–≤–æ–π —Å–µ—Å—Å–∏–∏ —á–µ—Ä–µ–∑ SDP answer
- ‚úÖ –ü–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏

–ü—Ä–∏–º–µ—Ä –≥–æ—Ç–æ–≤ –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è, –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –∏ –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ —Ä–∞–∑–≤–∏—Ç–∏—è! üéâ 