=== RUN   TestHighLoadConcurrentDialogs
    concurrent_load_test.go:238: Client 0: Successfully sent BYE for dialog 0 on attempt 1
    concurrent_load_test.go:101: Server: Dialog f93910bf6e3a5f11000061a800028af1@softphone:343781b7c6d311e8:3b45005f37be249f terminated normally (state=Terminated)
    concurrent_load_test.go:85: Server: Dialog f93910bf6e3a5f11000061a800028af1@softphone:343781b7c6d311e8:3b45005f37be249f cleanup completed
    concurrent_load_test.go:238: Client 1: Successfully sent BYE for dialog 0 on attempt 1
    concurrent_load_test.go:101: Server: Dialog 9b97db666df103f70000afc800048af1@softphone:343781b7c6d311e8:3b45005f37be249f terminated normally (state=Terminated)
    concurrent_load_test.go:85: Server: Dialog 9b97db666df103f70000afc800048af1@softphone:343781b7c6d311e8:3b45005f37be249f cleanup completed
    concurrent_load_test.go:238: Client 2: Successfully sent BYE for dialog 0 on attempt 1
    concurrent_load_test.go:238: Client 0: Successfully sent BYE for dialog 1 on attempt 1
    concurrent_load_test.go:101: Server: Dialog 60cb4bf6fbef4b080000ea6000088af1@softphone:c48f840f4b1d2cb4:3b45005f37be249f terminated normally (state=Terminated)
    concurrent_load_test.go:101: Server: Dialog 00d2cd821ae756440000cb2000068af1@softphone:d4983b9837fc76ab:3b45005f37be249f terminated normally (state=Terminated)
    concurrent_load_test.go:85: Server: Dialog 00d2cd821ae756440000cb2000068af1@softphone:d4983b9837fc76ab:3b45005f37be249f cleanup completed
    concurrent_load_test.go:85: Server: Dialog 60cb4bf6fbef4b080000ea6000088af1@softphone:c48f840f4b1d2cb4:3b45005f37be249f cleanup completed
    concurrent_load_test.go:238: Client 3: Successfully sent BYE for dialog 0 on attempt 1
    concurrent_load_test.go:238: Client 1: Successfully sent BYE for dialog 1 on attempt 1
    concurrent_load_test.go:101: Server: Dialog 1c6afa7a2617781e00011170000a8af1@softphone:bfcaee4222f8ab89:71777f83f8307006 terminated normally (state=Terminated)
    concurrent_load_test.go:101: Server: Dialog 599f89f38a9a67de0000fde800098af1@softphone:d4983b9837fc76ab:0172947025ae8f46 terminated normally (state=Terminated)
    concurrent_load_test.go:85: Server: Dialog 1c6afa7a2617781e00011170000a8af1@softphone:bfcaee4222f8ab89:71777f83f8307006 cleanup completed
    concurrent_load_test.go:85: Server: Dialog 599f89f38a9a67de0000fde800098af1@softphone:d4983b9837fc76ab:0172947025ae8f46 cleanup completed
    concurrent_load_test.go:238: Client 4: Successfully sent BYE for dialog 0 on attempt 1
    concurrent_load_test.go:238: Client 2: Successfully sent BYE for dialog 1 on attempt 1
    concurrent_load_test.go:238: Client 0: Successfully sent BYE for dialog 2 on attempt 1
==================
WARNING: DATA RACE
Write at 0x00c000904280 by goroutine 256:
  github.com/arzzra/soft_phone/pkg/dialog.(*IDGeneratorPool).generateTagDirect()
      /Users/arz/work/soft_phone/pkg/dialog/id_generator.go:202 +0x377
  github.com/arzzra/soft_phone/pkg/dialog.NewIDGeneratorPool.func2()
      /Users/arz/work/soft_phone/pkg/dialog/id_generator.go:87 +0x44
  sync.(*Pool).Get()
      /usr/local/go/src/sync/pool.go:155 +0xf0
  github.com/arzzra/soft_phone/pkg/dialog.(*IDGeneratorPool).GetTag()
      /Users/arz/work/soft_phone/pkg/dialog/id_generator.go:284 +0x34
  github.com/arzzra/soft_phone/pkg/dialog.generateTag()
      /Users/arz/work/soft_phone/pkg/dialog/id_generator.go:371 +0x251
  github.com/arzzra/soft_phone/pkg/dialog.generateTransactionID()
      /Users/arz/work/soft_phone/pkg/dialog/transaction_adapter.go:552 +0xb3
  github.com/arzzra/soft_phone/pkg/dialog.NewServerTransactionAdapter()
      /Users/arz/work/soft_phone/pkg/dialog/transaction_adapter.go:137 +0x93
  github.com/arzzra/soft_phone/pkg/dialog.(*TransactionManager).CreateServerTransaction()
      /Users/arz/work/soft_phone/pkg/dialog/transaction_manager.go:156 +0xa4
  github.com/arzzra/soft_phone/pkg/dialog.(*Stack).handleIncomingInvite()
      /Users/arz/work/soft_phone/pkg/dialog/handlers.go:45 +0x224
  github.com/arzzra/soft_phone/pkg/dialog.(*Stack).setupHandlers.func1()
      /Users/arz/work/soft_phone/pkg/dialog/stack.go:676 +0x48
  github.com/emiago/sipgo.(*Server).handleRequest()
      /Users/arz/go/pkg/mod/github.com/emiago/sipgo@v0.33.0/server.go:267 +0x147
  github.com/emiago/sipgo.(*Server).handleRequest-fm()
      <autogenerated>:1 +0x47
  github.com/emiago/sipgo/sip.(*TransactionLayer).serverTxRequest()
      /Users/arz/go/pkg/mod/github.com/emiago/sipgo@v0.33.0/sip/transaction_layer.go:155 +0x379
  github.com/emiago/sipgo/sip.(*TransactionLayer).handleRequest()
      /Users/arz/go/pkg/mod/github.com/emiago/sipgo@v0.33.0/sip/transaction_layer.go:129 +0x3f5
  github.com/emiago/sipgo/sip.(*TransactionLayer).handleRequestBackground()
      /Users/arz/go/pkg/mod/github.com/emiago/sipgo@v0.33.0/sip/transaction_layer.go:89 +0x4b
  github.com/emiago/sipgo/sip.(*TransactionLayer).handleMessage.gowrap1()
      /Users/arz/go/pkg/mod/github.com/emiago/sipgo@v0.33.0/sip/transaction_layer.go:80 +0x44

Previous read at 0x00c000904280 by goroutine 29:
  runtime.slicecopy()
      /usr/local/go/src/runtime/slice.go:355 +0x0
  fmt.(*buffer).writeString()
      /usr/local/go/src/fmt/print.go:108 +0x126
  fmt.(*fmt).padString()
      /usr/local/go/src/fmt/format.go:113 +0x8f
  fmt.(*fmt).fmtS()
      /usr/local/go/src/fmt/format.go:362 +0x74
  fmt.(*pp).fmtString()
      /usr/local/go/src/fmt/print.go:497 +0x155
  fmt.(*pp).printArg()
      /usr/local/go/src/fmt/print.go:741 +0x8b5
  fmt.(*pp).doPrintf()
      /usr/local/go/src/fmt/print.go:1074 +0x5bc
  fmt.Sprintf()
      /usr/local/go/src/fmt/print.go:239 +0x5c
  github.com/arzzra/soft_phone/pkg/dialog.generateTransactionID()
      /Users/arz/work/soft_phone/pkg/dialog/transaction_adapter.go:552 +0x17e
  github.com/arzzra/soft_phone/pkg/dialog.NewClientTransactionAdapter()
      /Users/arz/work/soft_phone/pkg/dialog/transaction_adapter.go:95 +0x90
  github.com/arzzra/soft_phone/pkg/dialog.(*TransactionManager).CreateClientTransaction()
      /Users/arz/work/soft_phone/pkg/dialog/transaction_manager.go:126 +0x284
  github.com/arzzra/soft_phone/pkg/dialog.(*Stack).NewInvite()
      /Users/arz/work/soft_phone/pkg/dialog/stack.go:655 +0x1172
  github.com/arzzra/soft_phone/pkg/dialog.TestHighLoadConcurrentDialogs.func2.1()
      /Users/arz/work/soft_phone/pkg/dialog/concurrent_load_test.go:177 +0x2b3
  github.com/arzzra/soft_phone/pkg/dialog.TestHighLoadConcurrentDialogs.func2.gowrap3()
      /Users/arz/work/soft_phone/pkg/dialog/concurrent_load_test.go:250 +0x41

Goroutine 256 (running) created at:
  github.com/emiago/sipgo/sip.(*TransactionLayer).handleMessage()
      /Users/arz/go/pkg/mod/github.com/emiago/sipgo@v0.33.0/sip/transaction_layer.go:80 +0x1cc
  github.com/emiago/sipgo/sip.(*TransactionLayer).handleMessage-fm()
      <autogenerated>:1 +0x47
  github.com/emiago/sipgo/sip.(*TransportLayer).handleMessage()
      /Users/arz/go/pkg/mod/github.com/emiago/sipgo@v0.33.0/sip/transport_layer.go:158 +0x91
  github.com/emiago/sipgo/sip.(*TransportLayer).handleMessage-fm()
      <autogenerated>:1 +0x29
  github.com/emiago/sipgo/sip.(*transportUDP).parseAndHandle()
      /Users/arz/go/pkg/mod/github.com/emiago/sipgo@v0.33.0/sip/transport_udp.go:295 +0x2b8
  github.com/emiago/sipgo/sip.(*transportUDP).readListenerConnection()
      /Users/arz/go/pkg/mod/github.com/emiago/sipgo@v0.33.0/sip/transport_udp.go:216 +0x619
  github.com/emiago/sipgo/sip.(*transportUDP).Serve()
      /Users/arz/go/pkg/mod/github.com/emiago/sipgo@v0.33.0/sip/transport_udp.go:68 +0x370
  github.com/emiago/sipgo/sip.(*TransportLayer).ServeUDP()
      /Users/arz/go/pkg/mod/github.com/emiago/sipgo@v0.33.0/sip/transport_layer.go:171 +0xd8
  github.com/emiago/sipgo.(*Server).ListenAndServe()
      /Users/arz/go/pkg/mod/github.com/emiago/sipgo@v0.33.0/server.go:133 +0x7ef
  github.com/arzzra/soft_phone/pkg/dialog.(*Stack).Start.func1()
      /Users/arz/work/soft_phone/pkg/dialog/stack.go:499 +0x27a

Goroutine 29 (running) created at:
  github.com/arzzra/soft_phone/pkg/dialog.TestHighLoadConcurrentDialogs.func2()
      /Users/arz/work/soft_phone/pkg/dialog/concurrent_load_test.go:161 +0x6da
  github.com/arzzra/soft_phone/pkg/dialog.TestHighLoadConcurrentDialogs.gowrap2()
      /Users/arz/work/soft_phone/pkg/dialog/concurrent_load_test.go:254 +0x41
==================
    concurrent_load_test.go:101: Server: Dialog f92e2bfee1fa92ae000124f8000b8af1@softphone:c517afb5280595f6:e1965dd730b90531 terminated normally (state=Terminated)
    concurrent_load_test.go:85: Server: Dialog f92e2bfee1fa92ae000124f8000b8af1@softphone:c517afb5280595f6:e1965dd730b90531 cleanup completed
    concurrent_load_test.go:101: Server: Dialog 1851edd55db83f5b00003e8000018af1@softphone:c517afb5280595f6:d4983b9837fc76ab terminated normally (state=Terminated)
    concurrent_load_test.go:85: Server: Dialog 1851edd55db83f5b00003e8000018af1@softphone:c517afb5280595f6:d4983b9837fc76ab cleanup completed
    concurrent_load_test.go:101: Server: Dialog b570a784f9c9ab37000130b0000c8af1@softphone:3586d45b5a332094:20c920ce89e79638 terminated normally (state=Terminated)
    concurrent_load_test.go:85: Server: Dialog b570a784f9c9ab37000130b0000c8af1@softphone:3586d45b5a332094:20c920ce89e79638 cleanup completed
    concurrent_load_test.go:238: Client 3: Successfully sent BYE for dialog 1 on attempt 1
    concurrent_load_test.go:238: Client 1: Successfully sent BYE for dialog 2 on attempt 1
    concurrent_load_test.go:101: Server: Dialog 05d321f0172d909e00015ba8000e8af1@softphone:6d694a6c96cba492:3586d45b5a332094 terminated normally (state=Terminated)
    concurrent_load_test.go:85: Server: Dialog 05d321f0172d909e00015ba8000e8af1@softphone:6d694a6c96cba492:3586d45b5a332094 cleanup completed
    concurrent_load_test.go:101: Server: Dialog 191ed8bc3ed3102d000182b8000f8af1@softphone:6d694a6c96cba492:3161de8e32e68c4a terminated normally (state=Terminated)
    concurrent_load_test.go:85: Server: Dialog 191ed8bc3ed3102d000182b8000f8af1@softphone:6d694a6c96cba492:3161de8e32e68c4a cleanup completed
    concurrent_load_test.go:238: Client 4: Successfully sent BYE for dialog 1 on attempt 1
    concurrent_load_test.go:238: Client 2: Successfully sent BYE for dialog 2 on attempt 1
    concurrent_load_test.go:238: Client 0: Successfully sent BYE for dialog 3 on attempt 1
    concurrent_load_test.go:101: Server: Dialog 3595563d9c2363430001964000108af1@softphone:f4f16853d3298be8:6d694a6c96cba492 terminated normally (state=Terminated)
    concurrent_load_test.go:101: Server: Dialog 53ec3cd3fedf87280001a1f800118af1@softphone:8100ddc818586fdd:6d694a6c96cba492 terminated normally (state=Terminated)
    concurrent_load_test.go:85: Server: Dialog 3595563d9c2363430001964000108af1@softphone:f4f16853d3298be8:6d694a6c96cba492 cleanup completed
    concurrent_load_test.go:101: Server: Dialog 4108be977f6b73dc0001b19800128af1@softphone:8100ddc818586fdd:6d694a6c96cba492 terminated normally (state=Terminated)
    concurrent_load_test.go:85: Server: Dialog 53ec3cd3fedf87280001a1f800118af1@softphone:8100ddc818586fdd:6d694a6c96cba492 cleanup completed
    concurrent_load_test.go:85: Server: Dialog 4108be977f6b73dc0001b19800128af1@softphone:8100ddc818586fdd:6d694a6c96cba492 cleanup completed
    concurrent_load_test.go:232: Client 3: Dialog 2 already terminated (481), considering success
    concurrent_load_test.go:232: Client 1: Dialog 3 already terminated (481), considering success
    concurrent_load_test.go:282: Progress: Created=21, Accepted=21, Terminated=14, Errors=0, ServerActive=7, ShardedMapCount=7
    concurrent_load_test.go:232: Client 4: Dialog 2 already terminated (481), considering success
    concurrent_load_test.go:232: Client 2: Dialog 3 already terminated (481), considering success
    concurrent_load_test.go:238: Client 0: Successfully sent BYE for dialog 4 on attempt 1
    concurrent_load_test.go:101: Server: Dialog 9dd7e570afce27f31e1b6d9000688af1@softphone:df4d9ade7477bf4c:672cf25906b16849 terminated normally (state=Terminated)
    concurrent_load_test.go:85: Server: Dialog 9dd7e570afce27f31e1b6d9000688af1@softphone:df4d9ade7477bf4c:672cf25906b16849 cleanup completed
    concurrent_load_test.go:232: Client 3: Dialog 3 already terminated (481), considering success
    concurrent_load_test.go:232: Client 1: Dialog 4 already terminated (481), considering success
    concurrent_load_test.go:238: Client 4: Successfully sent BYE for dialog 3 on attempt 1
    concurrent_load_test.go:232: Client 2: Dialog 4 already terminated (481), considering success
    concurrent_load_test.go:101: Server: Dialog 66b8abd3508d14b4240beba8006c8af1@softphone:857ea745589e6cde:f6256cafe8df5c00 terminated normally (state=Terminated)
    concurrent_load_test.go:85: Server: Dialog 66b8abd3508d14b4240beba8006c8af1@softphone:857ea745589e6cde:f6256cafe8df5c00 cleanup completed
    concurrent_load_test.go:232: Client 3: Dialog 4 already terminated (481), considering success
    concurrent_load_test.go:232: Client 4: Dialog 4 already terminated (481), considering success
    concurrent_load_test.go:282: Progress: Created=25, Accepted=25, Terminated=16, Errors=0, ServerActive=9, ShardedMapCount=9
    concurrent_load_test.go:282: Progress: Created=25, Accepted=25, Terminated=16, Errors=0, ServerActive=9, ShardedMapCount=9
    concurrent_load_test.go:282: Progress: Created=25, Accepted=25, Terminated=16, Errors=0, ServerActive=9, ShardedMapCount=9
    concurrent_load_test.go:282: Progress: Created=25, Accepted=25, Terminated=16, Errors=0, ServerActive=9, ShardedMapCount=9
    concurrent_load_test.go:282: Progress: Created=25, Accepted=25, Terminated=16, Errors=0, ServerActive=9, ShardedMapCount=9
    concurrent_load_test.go:282: Progress: Created=25, Accepted=25, Terminated=16, Errors=0, ServerActive=9, ShardedMapCount=9
    concurrent_load_test.go:282: Progress: Created=25, Accepted=25, Terminated=16, Errors=0, ServerActive=9, ShardedMapCount=9
    concurrent_load_test.go:282: Progress: Created=25, Accepted=25, Terminated=16, Errors=0, ServerActive=9, ShardedMapCount=9
    concurrent_load_test.go:282: Progress: Created=25, Accepted=25, Terminated=16, Errors=0, ServerActive=9, ShardedMapCount=9
    concurrent_load_test.go:282: Progress: Created=25, Accepted=25, Terminated=16, Errors=0, ServerActive=9, ShardedMapCount=9
    concurrent_load_test.go:282: Progress: Created=25, Accepted=25, Terminated=16, Errors=0, ServerActive=9, ShardedMapCount=9
    concurrent_load_test.go:282: Progress: Created=25, Accepted=25, Terminated=16, Errors=0, ServerActive=9, ShardedMapCount=9
    concurrent_load_test.go:282: Progress: Created=25, Accepted=25, Terminated=16, Errors=0, ServerActive=9, ShardedMapCount=9
    concurrent_load_test.go:282: Progress: Created=25, Accepted=25, Terminated=16, Errors=0, ServerActive=9, ShardedMapCount=9
    concurrent_load_test.go:282: Progress: Created=25, Accepted=25, Terminated=16, Errors=0, ServerActive=9, ShardedMapCount=9
    concurrent_load_test.go:282: Progress: Created=25, Accepted=25, Terminated=16, Errors=0, ServerActive=9, ShardedMapCount=9
    concurrent_load_test.go:282: Progress: Created=25, Accepted=25, Terminated=16, Errors=0, ServerActive=9, ShardedMapCount=9
    concurrent_load_test.go:282: Progress: Created=25, Accepted=25, Terminated=16, Errors=0, ServerActive=9, ShardedMapCount=9
    concurrent_load_test.go:282: Progress: Created=25, Accepted=25, Terminated=16, Errors=0, ServerActive=9, ShardedMapCount=9
    concurrent_load_test.go:282: Progress: Created=25, Accepted=25, Terminated=16, Errors=0, ServerActive=9, ShardedMapCount=9
    concurrent_load_test.go:282: Progress: Created=25, Accepted=25, Terminated=16, Errors=0, ServerActive=9, ShardedMapCount=9
    concurrent_load_test.go:282: Progress: Created=25, Accepted=25, Terminated=16, Errors=0, ServerActive=9, ShardedMapCount=9
    concurrent_load_test.go:282: Progress: Created=25, Accepted=25, Terminated=16, Errors=0, ServerActive=9, ShardedMapCount=9
    concurrent_load_test.go:282: Progress: Created=25, Accepted=25, Terminated=16, Errors=0, ServerActive=9, ShardedMapCount=9
    concurrent_load_test.go:282: Progress: Created=25, Accepted=25, Terminated=16, Errors=0, ServerActive=9, ShardedMapCount=9
    concurrent_load_test.go:282: Progress: Created=25, Accepted=25, Terminated=16, Errors=0, ServerActive=9, ShardedMapCount=9
    concurrent_load_test.go:282: Progress: Created=25, Accepted=25, Terminated=16, Errors=0, ServerActive=9, ShardedMapCount=9
    concurrent_load_test.go:282: Progress: Created=25, Accepted=25, Terminated=16, Errors=0, ServerActive=9, ShardedMapCount=9
    concurrent_load_test.go:282: Progress: Created=25, Accepted=25, Terminated=16, Errors=0, ServerActive=9, ShardedMapCount=9
    concurrent_load_test.go:282: Progress: Created=25, Accepted=25, Terminated=16, Errors=0, ServerActive=9, ShardedMapCount=9
    concurrent_load_test.go:318: Still active: 75d22a44242268cd2a0fe608006f8af1@softphone:3011e5e7e4c53f73:b8f91f9ad042cbe0
    concurrent_load_test.go:318: Still active: d7fcf603207a2b9b211befd8006b8af1@softphone:39c5f9e65d78d299:fe29f1ed408dbacb
    concurrent_load_test.go:318: Still active: 59a8ae67e8f2c63b241dbe28006d8af1@softphone:39c5f9e65d78d299:a795a6eea4fde1b7
    concurrent_load_test.go:318: Still active: 84d87eed81b2d0f31b28974800668af1@softphone:eb241299b8e89280:b5528dcbe04cff51
    concurrent_load_test.go:318: Still active: 6da8ae61bbe45fd21e1ab21000678af1@softphone:7509f9db114d1e37:e6141352c5105d52
    concurrent_load_test.go:318: Still active: 8030aeb9162c23f51b262e1800658af1@softphone:a2598786015a650d:0e3a4507a8379e4a
    concurrent_load_test.go:318: Still active: fd7aafcbca533eeb270b5c80006e8af1@softphone:1683c4f10d944a58:3d8b5af90de48947
    concurrent_load_test.go:318: Still active: c2de843c09fb0e29210d3a38006a8af1@softphone:eb241299b8e89280:3508189cd8f8cbad
    concurrent_load_test.go:318: Still active: fed4fb887ae32dd41e1f326800698af1@softphone:eb241299b8e89280:4d779a39c952cdb7
    concurrent_load_test.go:322: Timeout waiting for server cleanup, 9 dialogs still active
    concurrent_load_test.go:336: === FINAL RESULTS ===
    concurrent_load_test.go:337: Total dialogs created: 25
    concurrent_load_test.go:338: Total dialogs accepted: 25
    concurrent_load_test.go:339: Total dialogs terminated: 16
    concurrent_load_test.go:340: Total errors: 0
    concurrent_load_test.go:341: Server active dialogs: 9
    concurrent_load_test.go:342: Expected dialogs: 25
    concurrent_load_test.go:364: WARNING: 9 dialogs remaining in server (will be cleaned up by context cancellation)
    concurrent_load_test.go:113: Server: Dialog 8030aeb9162c23f51b262e1800658af1@softphone:a2598786015a650d:0e3a4507a8379e4a context cancelled
    concurrent_load_test.go:113: Server: Dialog 6da8ae61bbe45fd21e1ab21000678af1@softphone:7509f9db114d1e37:e6141352c5105d52 context cancelled
    concurrent_load_test.go:113: Server: Dialog 84d87eed81b2d0f31b28974800668af1@softphone:eb241299b8e89280:b5528dcbe04cff51 context cancelled
    concurrent_load_test.go:85: Server: Dialog 84d87eed81b2d0f31b28974800668af1@softphone:eb241299b8e89280:b5528dcbe04cff51 cleanup completed
    concurrent_load_test.go:113: Server: Dialog d7fcf603207a2b9b211befd8006b8af1@softphone:39c5f9e65d78d299:fe29f1ed408dbacb context cancelled
    concurrent_load_test.go:113: Server: Dialog c2de843c09fb0e29210d3a38006a8af1@softphone:eb241299b8e89280:3508189cd8f8cbad context cancelled
    concurrent_load_test.go:85: Server: Dialog 8030aeb9162c23f51b262e1800658af1@softphone:a2598786015a650d:0e3a4507a8379e4a cleanup completed
    concurrent_load_test.go:113: Server: Dialog 75d22a44242268cd2a0fe608006f8af1@softphone:3011e5e7e4c53f73:b8f91f9ad042cbe0 context cancelled
    concurrent_load_test.go:113: Server: Dialog 59a8ae67e8f2c63b241dbe28006d8af1@softphone:39c5f9e65d78d299:a795a6eea4fde1b7 context cancelled
    concurrent_load_test.go:113: Server: Dialog fed4fb887ae32dd41e1f326800698af1@softphone:eb241299b8e89280:4d779a39c952cdb7 context cancelled
    concurrent_load_test.go:113: Server: Dialog fd7aafcbca533eeb270b5c80006e8af1@softphone:1683c4f10d944a58:3d8b5af90de48947 context cancelled
    concurrent_load_test.go:85: Server: Dialog fd7aafcbca533eeb270b5c80006e8af1@softphone:1683c4f10d944a58:3d8b5af90de48947 cleanup completed
    concurrent_load_test.go:85: Server: Dialog 6da8ae61bbe45fd21e1ab21000678af1@softphone:7509f9db114d1e37:e6141352c5105d52 cleanup completed
    concurrent_load_test.go:85: Server: Dialog d7fcf603207a2b9b211befd8006b8af1@softphone:39c5f9e65d78d299:fe29f1ed408dbacb cleanup completed
    concurrent_load_test.go:85: Server: Dialog c2de843c09fb0e29210d3a38006a8af1@softphone:eb241299b8e89280:3508189cd8f8cbad cleanup completed
    concurrent_load_test.go:85: Server: Dialog 75d22a44242268cd2a0fe608006f8af1@softphone:3011e5e7e4c53f73:b8f91f9ad042cbe0 cleanup completed
    concurrent_load_test.go:85: Server: Dialog 59a8ae67e8f2c63b241dbe28006d8af1@softphone:39c5f9e65d78d299:a795a6eea4fde1b7 cleanup completed
    concurrent_load_test.go:85: Server: Dialog fed4fb887ae32dd41e1f326800698af1@softphone:eb241299b8e89280:4d779a39c952cdb7 cleanup completed
    concurrent_load_test.go:375: === SHARD DISTRIBUTION ===
    concurrent_load_test.go:378: Shard 6: 1 dialogs
    concurrent_load_test.go:378: Shard 2: 1 dialogs
    concurrent_load_test.go:378: Shard 1: 1 dialogs
    concurrent_load_test.go:378: Shard 30: 2 dialogs
    concurrent_load_test.go:378: Shard 27: 1 dialogs
    concurrent_load_test.go:378: Shard 17: 3 dialogs
    testing.go:1490: race detected during execution of test
--- FAIL: TestHighLoadConcurrentDialogs (16.36s)
=== RUN   TestConcurrentDialogOperations
    concurrent_load_test.go:488: State reads: 1000
    concurrent_load_test.go:489: State writes: 1000
    concurrent_load_test.go:490: Subscriptions added: 1000
    concurrent_load_test.go:491: Subscription reads: 1000
    concurrent_load_test.go:492: Errors detected: 0
    concurrent_load_test.go:500: Final active subscriptions: 1000
--- PASS: TestConcurrentDialogOperations (0.04s)
=== RUN   TestConcurrentStateChangeCallbacks
    thread_safety_test.go:349: Total callback executions: 3950
    thread_safety_test.go:350: Total panics handled: 395
--- PASS: TestConcurrentStateChangeCallbacks (0.00s)
FAIL
FAIL	github.com/arzzra/soft_phone/pkg/dialog	16.763s
FAIL
